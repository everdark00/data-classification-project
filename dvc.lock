schema: '2.0'
stages:
  tika_de:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=de
    deps:
    - path: data_test/raw//de
      md5: 358fa374b312736881e8be829500010d.dir
      size: 100607039
      nfiles: 205
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//de
      md5: 9857051be79a3ce405cd9da65e99dd9e.dir
      size: 6711969
      nfiles: 205
  tokenizer_de:
    cmd: export PYTHONPATH=$PWD && python -m spacy download de_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=de
    deps:
    - path: data_test/interim/tika/de
      md5: 9857051be79a3ce405cd9da65e99dd9e.dir
      size: 6711969
      nfiles: 205
    - path: src/tokenizer.py
      md5: d21960ec0414a251f3585619c9598040
      size: 3934
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/de
      md5: f3b62d17b930d6a7b102bc1ec7c3f705.dir
      size: 3161416
      nfiles: 9
  train_de:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=de
    deps:
    - path: data_test/interim/tokenizer/de
      md5: f3b62d17b930d6a7b102bc1ec7c3f705.dir
      size: 3161416
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/de/pca.txt
      md5: b7ef88a6f34828d52ec0f78a4d04d545
      size: 882786
    - path: data_test/interim/train/de/tfidf_idf.txt
      md5: 19a7235c44eeb02e06625b8e9c23ac73
      size: 18904
    - path: data_test/interim/train/de/tfidf_vocab.txt
      md5: 9d60748e3e608a2962b1c4348a4739f0
      size: 10990
    - path: data_test/interim/train/de/tfidf_vocab_words.txt
      md5: 861bc989b5b12262e450d6649ea1c923
      size: 7876
    - path: models//de/model.txt
      md5: 99776f16c1d503e077d5b7adddbabe2b
      size: 6270
    - path: models//de/pca.pkl
      md5: e6af86b7fbf69f3b2e3e7865f078bf17
      size: 329461
    - path: reports//de/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//de/confusion.csv
      md5: 6d1f03274abefdd2d6196839656d926e
      size: 101
    - path: reports//de/metrics.json
      md5: 50a4e0e314ad2fc9a37f84393e13bca1
      size: 61
    - path: reports//de/train_progress.csv
      md5: 2983794154cda876979853e8811e65ba
      size: 5196
  make_small_dataset:
    cmd: export PYTHONPATH=$PWD && python src/make_test_dataset.py --config=params.yaml
      --test_dir=data_test
    deps:
    - path: src/make_test_dataset.py
      md5: 369f9c4f31aa5e866b26ac0bd2784a77
      size: 1566
    outs:
    - path: data_test/raw/de
      md5: ed415476b6bb791945121541cd03e0b3.dir
      size: 94126353
      nfiles: 205
    - path: data_test/raw/es
      md5: 2d32648e66465168018d6468213188a4.dir
      size: 65410390
      nfiles: 229
    - path: data_test/raw/fr
      md5: f3c0a7447a4386da507e1dd0c6c15cef.dir
      size: 67877226
      nfiles: 218
    - path: data_test/raw/it
      md5: f85370ff9b8819c5c89f06b516ae76b6.dir
      size: 44140397
      nfiles: 196
    - path: data_test/raw/ja
      md5: fc6304eea4403edd31a64ef0814f3858.dir
      size: 91818770
      nfiles: 352
  tika_fr:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=fr
    deps:
    - path: data_test/raw//fr
      md5: 99309230414a0c5f9d604a18a19dba4a.dir
      size: 67934726
      nfiles: 218
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//fr
      md5: 4dee194f5756ac245333640152881c35.dir
      size: 4884861
      nfiles: 218
  tokenizer_fr:
    cmd: export PYTHONPATH=$PWD && python -m spacy download fr_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=fr
    deps:
    - path: data_test/interim/tika/fr
      md5: 4dee194f5756ac245333640152881c35.dir
      size: 4884861
      nfiles: 218
    - path: src/tokenizer.py
      md5: d21960ec0414a251f3585619c9598040
      size: 3934
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/fr
      md5: 2eb4fd6f51ccd48253c637d620b322b4.dir
      size: 2266604
      nfiles: 9
  train_fr:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=fr
    deps:
    - path: data_test/interim/tokenizer/fr
      md5: 2eb4fd6f51ccd48253c637d620b322b4.dir
      size: 2266604
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/fr/pca.txt
      md5: ef52ab99afc1464a0cebd404a50a954f
      size: 860139
    - path: data_test/interim/train/fr/tfidf_idf.txt
      md5: f8bf8ac6bb53bcf4bfd966f03d4fc441
      size: 19004
    - path: data_test/interim/train/fr/tfidf_vocab.txt
      md5: 062d0e4fefd1fa7700f3b96d50ca1089
      size: 10999
    - path: data_test/interim/train/fr/tfidf_vocab_words.txt
      md5: 4110b01bead8f0af9434dd90d297be36
      size: 7930
    - path: models//fr/model.txt
      md5: 7df961304ccc193e2eb666af88009b6a
      size: 6218
    - path: models//fr/pca.pkl
      md5: e12ecdbe5dc7be8c48fdf9d90ec7e39b
      size: 321245
    - path: reports//fr/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//fr/confusion.csv
      md5: d2ba15bc6e99dfd1e05e83131b51d180
      size: 93
    - path: reports//fr/metrics.json
      md5: 54fcd19e766071b4d69ea33e61665abf
      size: 77
    - path: reports//fr/train_progress.csv
      md5: 884f0a078a25fefd36b6bf56bb4da9e1
      size: 5436
  tika_es:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=es
    deps:
    - path: data_test/raw//es
      md5: 2f9b8d415aa60da4a90c87966ea366d7.dir
      size: 54698445
      nfiles: 229
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//es
      md5: 135edeb53ea5827cfc40c02767e574f5.dir
      size: 10909073
      nfiles: 229
  tokenizer_es:
    cmd: export PYTHONPATH=$PWD && python -m spacy download es_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=es
    deps:
    - path: data_test/interim/tika/es
      md5: 135edeb53ea5827cfc40c02767e574f5.dir
      size: 10909073
      nfiles: 229
    - path: src/tokenizer.py
      md5: d21960ec0414a251f3585619c9598040
      size: 3934
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/es
      md5: ef7e192185c54b29949e86aef63a44d1.dir
      size: 1957425
      nfiles: 9
  train_es:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=es
    deps:
    - path: data_test/interim/tokenizer/es
      md5: ef7e192185c54b29949e86aef63a44d1.dir
      size: 1957425
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/es/pca.txt
      md5: a97f1f5a8aebf2976b3d941c2b686b8e
      size: 858211
    - path: data_test/interim/train/es/tfidf_idf.txt
      md5: 945cf4554bcfbcf45033cab0885c6631
      size: 19027
    - path: data_test/interim/train/es/tfidf_vocab.txt
      md5: 0c502ef6416cc1ccf51aa004584734c6
      size: 10998
    - path: data_test/interim/train/es/tfidf_vocab_words.txt
      md5: 508efe426683773020e6afed22ec814e
      size: 7859
    - path: models//es/model.txt
      md5: 2568d800848ca5a2a01944ddfa6a3892
      size: 6213
    - path: models//es/pca.pkl
      md5: 9e7d0002e11196922a2b72b357b68239
      size: 321245
    - path: reports//es/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//es/confusion.csv
      md5: 5200d7456872f036909887391331ca9d
      size: 93
    - path: reports//es/metrics.json
      md5: af89116ce674b2470e3dc993559a1a0e
      size: 61
    - path: reports//es/train_progress.csv
      md5: e4313c866711013c3c757d9a6261d4ca
      size: 5436
  tika_it:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=it
    deps:
    - path: data_test/raw//it
      md5: 25f177f79d071d0d9a7528103767b838.dir
      size: 74807624
      nfiles: 196
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//it
      md5: 37dc2249c03d5d3ab1f78473b638674f.dir
      size: 4309483
      nfiles: 196
  tokenizer_it:
    cmd: export PYTHONPATH=$PWD && python -m spacy download it_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=it
    deps:
    - path: data_test/interim/tika/it
      md5: 37dc2249c03d5d3ab1f78473b638674f.dir
      size: 4309483
      nfiles: 196
    - path: src/tokenizer.py
      md5: d21960ec0414a251f3585619c9598040
      size: 3934
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/it
      md5: 8ba4c85e6ef1856b9137e332d4a18af5.dir
      size: 2420368
      nfiles: 9
  train_it:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=it
    deps:
    - path: data_test/interim/tokenizer/it
      md5: 8ba4c85e6ef1856b9137e332d4a18af5.dir
      size: 2420368
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/it/pca.txt
      md5: 36decdcf8dde4656374ecb696eccfd10
      size: 793765
    - path: data_test/interim/train/it/tfidf_idf.txt
      md5: 83cc619cf38a5919aa2b6e094d85ba2f
      size: 18895
    - path: data_test/interim/train/it/tfidf_vocab.txt
      md5: 6d23ddd948c154a1a3bf6609e728c2a6
      size: 11027
    - path: data_test/interim/train/it/tfidf_vocab_words.txt
      md5: 21209bf68be8a09a319e14a38677c89f
      size: 7932
    - path: models//it/model.txt
      md5: 93835746d8df4f7c58a6baa0db00e2b6
      size: 6063
    - path: models//it/pca.pkl
      md5: 0104aee5179a8a291120ed19416fff63
      size: 296597
    - path: reports//it/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//it/confusion.csv
      md5: 610830296f532559bae58fe3ed07100c
      size: 89
    - path: reports//it/metrics.json
      md5: 8db0f1203274ec1fab9beaf943f9f783
      size: 76
    - path: reports//it/train_progress.csv
      md5: 629e61410c761967dbaef8755620c9b9
      size: 5436
  tika_ja:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=ja
    deps:
    - path: data_test/raw//ja
      md5: fc6304eea4403edd31a64ef0814f3858.dir
      size: 91818770
      nfiles: 352
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//ja
      md5: 5590a4c3f3b44885573a76e858d6dd0b.dir
      size: 5499183
      nfiles: 352
  tokenizer_ja:
    cmd: export PYTHONPATH=$PWD && python -m spacy download ja_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=ja
    deps:
    - path: data_test/interim/tika/ja
      md5: 5590a4c3f3b44885573a76e858d6dd0b.dir
      size: 5499183
      nfiles: 352
    - path: src/tokenizer.py
      md5: ed59716e9e5f090388f101912c19f224
      size: 3963
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/ja
      md5: efd37cf2c0c23878f30f8231d1bee61f.dir
      size: 3475930
      nfiles: 9
  train_ja:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=ja
    deps:
    - path: data_test/interim/tokenizer/ja
      md5: efd37cf2c0c23878f30f8231d1bee61f.dir
      size: 3475930
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/ja/pca.txt
      md5: ef26f6d31bbdaf0af28f1a159cf1db6f
      size: 835030
    - path: data_test/interim/train/ja/tfidf_idf.txt
      md5: 2ad01b1d88df952383c491366bb38858
      size: 18768
    - path: data_test/interim/train/ja/tfidf_vocab.txt
      md5: 2c47ef2b4fc45fdc2a250245a2c5f0e4
      size: 11002
    - path: data_test/interim/train/ja/tfidf_vocab_words.txt
      md5: e19b82f8852f19a72586cd6442cb9e73
      size: 6931
    - path: models//ja/model.txt
      md5: 7b9179cbc3df935f641ffe57db238ef4
      size: 6161
    - path: models//ja/pca.pkl
      md5: f37dcd12049c891d6281bbfe1adda3b2
      size: 313029
    - path: reports//ja/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//ja/confusion.csv
      md5: ee282aad2b5f4205c6da6849db7c945c
      size: 93
    - path: reports//ja/metrics.json
      md5: c9629003095b5d4d4a43f2662e0ff193
      size: 77
    - path: reports//ja/train_progress.csv
      md5: 1d267d31d9ed06f062193ddcc507cca8
      size: 5436
