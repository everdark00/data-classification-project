schema: '2.0'
stages:
  tika_de:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=de
    deps:
    - path: data/raw//de
      md5: 65071be381cd1cca54898b81324ee189.dir
      size: 75790954761
      nfiles: 333115
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//de
      md5: c1a5a2ace58b0a2679e4f433fc9c8a68.dir
      size: 8348823959
      nfiles: 333115
  tokenizer_de:
    cmd: export PYTHONPATH=$PWD && python -m spacy download de_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=de
    deps:
    - path: data/interim/tika/de
      md5: c1a5a2ace58b0a2679e4f433fc9c8a68.dir
      size: 8348823959
      nfiles: 333115
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/de
      md5: c7ee4969c9a6e1cad631cae3006bbec1.dir
      size: 2127686831
      nfiles: 9
  train_de:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=de
    deps:
    - path: data/interim/tokenizer/de
      md5: c7ee4969c9a6e1cad631cae3006bbec1.dir
      size: 2127686831
      nfiles: 9
    - path: src/train_model.py
      md5: 0ee6d4f06fcc3680c392c65f32262a02
      size: 11799
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/de/pca.txt
      md5: 6a34ba004c704065320979fa3fca9cbf
      size: 3957679
    - path: data/interim/train/de/tfidf_idf.txt
      md5: 563ccaea6c8000b60c435c98a4ccab78
      size: 18930
    - path: data/interim/train/de/tfidf_vocab.txt
      md5: 09a016d045f5b35db6d4f9aed3f518ab
      size: 10989
    - path: data/interim/train/de/tfidf_vocab_words.txt
      md5: 3e48bd4eef9bee06879ff2b64b41e297
      size: 7570
    - path: models//de/model.txt
      md5: 88b5e556b1b54f161eefd992ad25a9cf
      size: 2671352
    - path: models//de/pca.pkl
      md5: adfbd1eb7cbd5cc062d17dcbbc291fb4
      size: 1479704
    - path: reports//de/best_params.yaml
      md5: a1f7aa455dfa373db1d1aad5dffa6307
      size: 247
    - path: reports//de/confusion.csv
      md5: 8ff8da1b7856dbd50c0354e57694fe15
      size: 127217
    - path: reports//de/metrics.json
      md5: 47431071b683a83fb439cc72adce9b7a
      size: 2480
    - path: reports//de/train_progress.csv
      md5: bc0a755955836ac14a8273b62fbee74f
      size: 5761
  tika_fr:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=fr
    deps:
    - path: data/raw//fr
      md5: 90cdb249083262b434ee57d2949e7c10.dir
      size: 88951903981
      nfiles: 341340
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//fr
      md5: 3dbc49c4c011239cb056f378b7643f8e.dir
      size: 8698283524
      nfiles: 341340
  tokenizer_fr:
    cmd: export PYTHONPATH=$PWD && python -m spacy download fr_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=fr
    deps:
    - path: data/interim/tika/fr
      md5: 3dbc49c4c011239cb056f378b7643f8e.dir
      size: 8698283524
      nfiles: 341340
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/fr
      md5: 3d11a8ed248da43f4a50ce922a76d214.dir
      size: 1904393544
      nfiles: 9
  train_fr:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=fr
    deps:
    - path: data/interim/tokenizer/fr
      md5: 3d11a8ed248da43f4a50ce922a76d214.dir
      size: 1904393544
      nfiles: 9
    - path: src/train_model.py
      md5: 0ee6d4f06fcc3680c392c65f32262a02
      size: 11799
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/fr/pca.txt
      md5: d880356c6e5ddab742c8350db03f41a1
      size: 5502313
    - path: data/interim/train/fr/tfidf_idf.txt
      md5: dc97f2fd424a1ba5e73d0420b802336a
      size: 18936
    - path: data/interim/train/fr/tfidf_vocab.txt
      md5: 92e6548fc9044406329dde3b916164e9
      size: 11005
    - path: data/interim/train/fr/tfidf_vocab_words.txt
      md5: 32cba6754e5ae0baae23f5adcb0bb1b6
      size: 7507
    - path: models//fr/model.txt
      md5: bee479d21e38d9b5ccab8a78c16890c3
      size: 2563649
    - path: models//fr/pca.pkl
      md5: 84301f0d81a770a745577cae952c56d6
      size: 2063040
    - path: reports//fr/best_params.yaml
      md5: a1f7aa455dfa373db1d1aad5dffa6307
      size: 247
    - path: reports//fr/confusion.csv
      md5: f8cead21226330c2b521b1b901a7b141
      size: 125013
    - path: reports//fr/metrics.json
      md5: 130cfd147bc296fcb5c2b86c678b64bd
      size: 2462
    - path: reports//fr/train_progress.csv
      md5: 950da7393ce96a1d15efacc27c52cbb9
      size: 5782
  tika_it:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=it
    deps:
    - path: data/raw//it
      md5: f91b43c20c58e309afb4561e67299303.dir
      size: 47722809107
      nfiles: 191210
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//it
      md5: 5a073eb3e79b8f9847ffab36b8198d29.dir
      size: 4847095940
      nfiles: 191210
  tokenizer_it:
    cmd: export PYTHONPATH=$PWD && python -m spacy download it_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=it
    deps:
    - path: data/interim/tika/it
      md5: 5a073eb3e79b8f9847ffab36b8198d29.dir
      size: 4847095940
      nfiles: 191210
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/it
      md5: 2d1c45773645aca7f64e212ae6f8d583.dir
      size: 1521267042
      nfiles: 9
  train_it:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=it
    deps:
    - path: data/interim/tokenizer/it
      md5: 2d1c45773645aca7f64e212ae6f8d583.dir
      size: 1521267042
      nfiles: 9
    - path: src/train_model.py
      md5: 0ee6d4f06fcc3680c392c65f32262a02
      size: 11799
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/it/pca.txt
      md5: 540277ef4d3582b7c27d6c2b2c1dd343
      size: 3618702
    - path: data/interim/train/it/tfidf_idf.txt
      md5: cf2c9bb8b21a11d38fb3aba1e65125f0
      size: 18965
    - path: data/interim/train/it/tfidf_vocab.txt
      md5: 457c802193f9fc8c795ecbbeb83ffb38
      size: 11006
    - path: data/interim/train/it/tfidf_vocab_words.txt
      md5: 5be982f971592b6d1158989bad13c79b
      size: 7907
    - path: models//it/model.txt
      md5: bc622c85c4bfc89a7882efb8aa1f884b
      size: 1795972
    - path: models//it/pca.pkl
      md5: bb3e97fd006f0774defc872fb53f04d0
      size: 1356462
    - path: reports//it/best_params.yaml
      md5: a1f7aa455dfa373db1d1aad5dffa6307
      size: 247
    - path: reports//it/confusion.csv
      md5: 50202d849259b86a79de1e902b42b178
      size: 68081
    - path: reports//it/metrics.json
      md5: baa34bb1790a7bbf204f273df6bf4973
      size: 2480
    - path: reports//it/train_progress.csv
      md5: 1f312057d22297862fc34226d25e474d
      size: 5715
  tika_es:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=es
    deps:
    - path: data/raw//es
      md5: a0d6495d920216ede703c75b1817baf8.dir
      size: 46119187756
      nfiles: 334412
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//es
      md5: e609fe493830c55d29f52a2d235505dc.dir
      size: 7807202360
      nfiles: 334412
  tokenizer_es:
    cmd: export PYTHONPATH=$PWD && python -m spacy download es_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=es
    deps:
    - path: data/interim/tika/es
      md5: e609fe493830c55d29f52a2d235505dc.dir
      size: 7807202360
      nfiles: 334412
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/es
      md5: dace536de3c1cd9339815fe8c0034e99.dir
      size: 1735895441
      nfiles: 9
  train_es:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=es
    deps:
    - path: data/interim/tokenizer/es
      md5: dace536de3c1cd9339815fe8c0034e99.dir
      size: 1735895441
      nfiles: 9
    - path: src/train_model.py
      md5: 0ee6d4f06fcc3680c392c65f32262a02
      size: 11799
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/es/pca.txt
      md5: ef33c78789a90680499325ea4b0927ff
      size: 5676323
    - path: data/interim/train/es/tfidf_idf.txt
      md5: d0f61260406f0f6af5c6dc422686ba5a
      size: 18930
    - path: data/interim/train/es/tfidf_vocab.txt
      md5: a50a70f81c361994f6d01a0d29a168f9
      size: 10997
    - path: data/interim/train/es/tfidf_vocab_words.txt
      md5: 83c7783397ec546a54aa41d5007c8605
      size: 7725
    - path: models//es/model.txt
      md5: ea7f6239397109d4a21d07d90e53f248
      size: 2355147
    - path: models//es/pca.pkl
      md5: 916900e94df37c00f9b9f9bcef754b7d
      size: 2128772
    - path: reports//es/best_params.yaml
      md5: a1f7aa455dfa373db1d1aad5dffa6307
      size: 247
    - path: reports//es/confusion.csv
      md5: 9b23386e87cd1630d5752224d01af053
      size: 131125
    - path: reports//es/metrics.json
      md5: 202ac8126e29cfab25daed23467c6b99
      size: 2466
    - path: reports//es/train_progress.csv
      md5: a346ae65a29a556a71a64602d94b6ba1
      size: 5783
  tika_ja:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=ja
    deps:
    - path: data/raw//ja
      md5: 0e7c3c299a9194021cd3c196fdf38399.dir
      size: 77864476465
      nfiles: 308788
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//ja
      md5: 52b47f53186fd50b2016d7b3911bc8d6.dir
      size: 5661957797
      nfiles: 308788
  tokenizer_ja:
    cmd: export PYTHONPATH=$PWD && python -m spacy download ja_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=ja
    deps:
    - path: data/interim/tika/ja
      md5: 52b47f53186fd50b2016d7b3911bc8d6.dir
      size: 5661957797
      nfiles: 308788
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/ja
      md5: db5c1ec4e89c00b7b44162d98f1e0e3e.dir
      size: 2219169413
      nfiles: 9
  train_ja:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=ja
    deps:
    - path: data/interim/tokenizer/ja
      md5: db5c1ec4e89c00b7b44162d98f1e0e3e.dir
      size: 2219169413
      nfiles: 9
    - path: src/train_model.py
      md5: 0ee6d4f06fcc3680c392c65f32262a02
      size: 11799
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/ja/pca.txt
      md5: f9f21fbadae5a631226d907626d8692c
      size: 7028051
    - path: data/interim/train/ja/tfidf_idf.txt
      md5: 38152922ecf65d7acd91f13173a73a29
      size: 18983
    - path: data/interim/train/ja/tfidf_vocab.txt
      md5: 8cb9f0e0b5baa23351d50872d786a218
      size: 11006
    - path: data/interim/train/ja/tfidf_vocab_words.txt
      md5: eaec09c9733af375cd4dcdbb1861b93b
      size: 6993
    - path: models//ja/model.txt
      md5: b9f5bcf276e6cb8c6921e5ce6afb07fd
      size: 3091367
    - path: models//ja/pca.pkl
      md5: e2d290c9219252b7df431c9941342544
      size: 2638164
    - path: reports//ja/best_params.yaml
      md5: a1f7aa455dfa373db1d1aad5dffa6307
      size: 247
    - path: reports//ja/confusion.csv
      md5: 87d4a23fd714855283b9c1e3a5ed3b31
      size: 98669
    - path: reports//ja/metrics.json
      md5: 24cced6f768a303be6c54503586d6294
      size: 2463
    - path: reports//ja/train_progress.csv
      md5: f7503cc47e4293bd386af22839c004cc
      size: 5657
