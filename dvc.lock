schema: '2.0'
stages:
  tika_de:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=de
    deps:
    - path: data/raw//de
      md5: 65071be381cd1cca54898b81324ee189.dir
      size: 75790954761
      nfiles: 333115
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//de
      md5: c1a5a2ace58b0a2679e4f433fc9c8a68.dir
      size: 8348823959
      nfiles: 333115
  tokenizer_de:
    cmd: export PYTHONPATH=$PWD && python -m spacy download de_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=de
    deps:
    - path: data/interim/tika/de
      md5: c1a5a2ace58b0a2679e4f433fc9c8a68.dir
      size: 8348823959
      nfiles: 333115
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/de
      md5: c7ee4969c9a6e1cad631cae3006bbec1.dir
      size: 2127686831
      nfiles: 9
  train_de:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=de
    deps:
    - path: data/interim/tokenizer/de
      md5: c7ee4969c9a6e1cad631cae3006bbec1.dir
      size: 2127686831
      nfiles: 9
    - path: src/train_model.py
      md5: 84d9288b4c277780a33fb3022dcbab17
      size: 11856
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/de/pca.txt
      md5: 96d320542252c48a753c1c65398cb5d3
      size: 4720638
    - path: data/interim/train/de/tfidf_idf.txt
      md5: 34d878a00eef84753216bd6b1654adaa
      size: 18920
    - path: data/interim/train/de/tfidf_vocab.txt
      md5: c74a14cc1f60171d656c367244d89249
      size: 10995
    - path: data/interim/train/de/tfidf_vocab_words.txt
      md5: be8fc652e9057533b229e1f9d53c3968
      size: 7512
    - path: models//de/model.txt
      md5: 38b57987c5ffdf7610222f0f1f649d16
      size: 3387725
    - path: models//de/pca.pkl
      md5: 591b7548d9db7b9582e49bde1e7fff45
      size: 1767264
    - path: reports//de/best_params.yaml
      md5: 6497ad4612aba1647acfbbaba651b23d
      size: 247
    - path: reports//de/confusion.csv
      md5: e115d7bb02aeb7c9b237a6fda850ffa5
      size: 160933
    - path: reports//de/metrics.json
      md5: 28ff1d34198b8b734fc238db3b7b8e70
      size: 2986
    - path: reports//de/train_progress.csv
      md5: 3db4c94044ef49e89de66340183e76d8
      size: 5726
  tika_fr:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=fr
    deps:
    - path: data/raw//fr
      md5: 90cdb249083262b434ee57d2949e7c10.dir
      size: 88951903981
      nfiles: 341340
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//fr
      md5: 3dbc49c4c011239cb056f378b7643f8e.dir
      size: 8698283524
      nfiles: 341340
  tokenizer_fr:
    cmd: export PYTHONPATH=$PWD && python -m spacy download fr_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=fr
    deps:
    - path: data/interim/tika/fr
      md5: 3dbc49c4c011239cb056f378b7643f8e.dir
      size: 8698283524
      nfiles: 341340
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/fr
      md5: 3d11a8ed248da43f4a50ce922a76d214.dir
      size: 1904393544
      nfiles: 9
  train_fr:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=fr
    deps:
    - path: data/interim/tokenizer/fr
      md5: 3d11a8ed248da43f4a50ce922a76d214.dir
      size: 1904393544
      nfiles: 9
    - path: src/train_model.py
      md5: 84d9288b4c277780a33fb3022dcbab17
      size: 11856
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/fr/pca.txt
      md5: cb194e1961a43d744f4c4db57f2352be
      size: 5997424
    - path: data/interim/train/fr/tfidf_idf.txt
      md5: 69f70bec1a837be0c6b4fddb0f9066ec
      size: 18960
    - path: data/interim/train/fr/tfidf_vocab.txt
      md5: 2d8fdc39d44aa55dad9bbfc618e3c5e5
      size: 11015
    - path: data/interim/train/fr/tfidf_vocab_words.txt
      md5: 23b896d4d0b96349f8cb846924c683a1
      size: 7494
    - path: models//fr/model.txt
      md5: f20aac311e156a2b573d959a7c67360f
      size: 3246070
    - path: models//fr/pca.pkl
      md5: c107f4359d92ac2ce888629e0bfd5101
      size: 2252012
    - path: reports//fr/best_params.yaml
      md5: 6497ad4612aba1647acfbbaba651b23d
      size: 247
    - path: reports//fr/confusion.csv
      md5: 761982bdda5ce518ec5eb0cf174e634a
      size: 157909
    - path: reports//fr/metrics.json
      md5: c2607a1f50817e313413986401acdf66
      size: 2935
    - path: reports//fr/train_progress.csv
      md5: 3c2d10f3a77c10b11c9c1d4ae9aa6c99
      size: 5774
  tika_it:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=it
    deps:
    - path: data/raw//it
      md5: f91b43c20c58e309afb4561e67299303.dir
      size: 47722809107
      nfiles: 191210
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//it
      md5: 5a073eb3e79b8f9847ffab36b8198d29.dir
      size: 4847095940
      nfiles: 191210
  tokenizer_it:
    cmd: export PYTHONPATH=$PWD && python -m spacy download it_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=it
    deps:
    - path: data/interim/tika/it
      md5: 5a073eb3e79b8f9847ffab36b8198d29.dir
      size: 4847095940
      nfiles: 191210
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/it
      md5: 2d1c45773645aca7f64e212ae6f8d583.dir
      size: 1521267042
      nfiles: 9
  train_it:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=it
    deps:
    - path: data/interim/tokenizer/it
      md5: 2d1c45773645aca7f64e212ae6f8d583.dir
      size: 1521267042
      nfiles: 9
    - path: src/train_model.py
      md5: 84d9288b4c277780a33fb3022dcbab17
      size: 11856
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/it/pca.txt
      md5: 00693e25bcf15acfb44ce0a115b73666
      size: 3925340
    - path: data/interim/train/it/tfidf_idf.txt
      md5: 3057d83fe416caa8eb83b53c35b1acdb
      size: 18953
    - path: data/interim/train/it/tfidf_vocab.txt
      md5: fd87abc7dc14d82a0e27661b81e7ef36
      size: 11000
    - path: data/interim/train/it/tfidf_vocab_words.txt
      md5: 238ae5af9abcc64ae7f9c8ba1e980dca
      size: 7877
    - path: models//it/model.txt
      md5: fcc155a44ab83c892b8f3a120d2400b7
      size: 509868
    - path: models//it/pca.pkl
      md5: b7a70e382ed25c491207bfb238f69cc3
      size: 1471486
    - path: reports//it/best_params.yaml
      md5: 6497ad4612aba1647acfbbaba651b23d
      size: 247
    - path: reports//it/confusion.csv
      md5: 911126071c6fcca73ba1106f16f36d03
      size: 72581
    - path: reports//it/metrics.json
      md5: eba8d0cf6f9188a6d35dc00edd7b368f
      size: 2953
    - path: reports//it/train_progress.csv
      md5: 4db4b47bebecc95f247a81ac391143c1
      size: 5422
  tika_es:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=es
    deps:
    - path: data/raw//es
      md5: a0d6495d920216ede703c75b1817baf8.dir
      size: 46119187756
      nfiles: 334412
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//es
      md5: e609fe493830c55d29f52a2d235505dc.dir
      size: 7807202360
      nfiles: 334412
  tokenizer_es:
    cmd: export PYTHONPATH=$PWD && python -m spacy download es_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=es
    deps:
    - path: data/interim/tika/es
      md5: e609fe493830c55d29f52a2d235505dc.dir
      size: 7807202360
      nfiles: 334412
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/es
      md5: dace536de3c1cd9339815fe8c0034e99.dir
      size: 1735895441
      nfiles: 9
  train_es:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=es
    deps:
    - path: data/interim/tokenizer/es
      md5: dace536de3c1cd9339815fe8c0034e99.dir
      size: 1735895441
      nfiles: 9
    - path: src/train_model.py
      md5: 84d9288b4c277780a33fb3022dcbab17
      size: 11856
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/es/pca.txt
      md5: d6081a2f524e10e61fc5a8ddae3ac3e5
      size: 5627471
    - path: data/interim/train/es/tfidf_idf.txt
      md5: a69fe4da1f95624af6ef69ba3d90d568
      size: 18901
    - path: data/interim/train/es/tfidf_vocab.txt
      md5: fc78152a8444325624f8bfd4c0b4582f
      size: 11000
    - path: data/interim/train/es/tfidf_vocab_words.txt
      md5: 496a3a7e4ab25255efd41b2f434bfb16
      size: 7730
    - path: models//es/model.txt
      md5: c39705a921eb63611fc18678c664b33d
      size: 3830638
    - path: models//es/pca.pkl
      md5: 4be1e7fa63d64198d3184fe4e50d00d4
      size: 2112340
    - path: reports//es/best_params.yaml
      md5: 6497ad4612aba1647acfbbaba651b23d
      size: 247
    - path: reports//es/confusion.csv
      md5: 91babef8791d6e947c6151d3e74818d0
      size: 165197
    - path: reports//es/metrics.json
      md5: 51392ef53ac75f124a553a0790edfc2c
      size: 2969
    - path: reports//es/train_progress.csv
      md5: ead02008320bd36867f5fb80d1c931cc
      size: 5785
  tika_ja:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=ja
    deps:
    - path: data/raw//ja
      md5: 0e7c3c299a9194021cd3c196fdf38399.dir
      size: 77864476465
      nfiles: 308788
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data/interim/tika//ja
      md5: 52b47f53186fd50b2016d7b3911bc8d6.dir
      size: 5661957797
      nfiles: 308788
  tokenizer_ja:
    cmd: export PYTHONPATH=$PWD && python -m spacy download ja_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=ja
    deps:
    - path: data/interim/tika/ja
      md5: 52b47f53186fd50b2016d7b3911bc8d6.dir
      size: 5661957797
      nfiles: 308788
    - path: src/tokenizer.py
      md5: 092c180748eeabeb886b86d2a3e3d542
      size: 3805
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data/interim/tokenizer/ja
      md5: db5c1ec4e89c00b7b44162d98f1e0e3e.dir
      size: 2219169413
      nfiles: 9
  train_ja:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=ja
    deps:
    - path: data/interim/tokenizer/ja
      md5: db5c1ec4e89c00b7b44162d98f1e0e3e.dir
      size: 2219169413
      nfiles: 9
    - path: src/train_model.py
      md5: 84d9288b4c277780a33fb3022dcbab17
      size: 11856
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data/interim/train/ja/pca.txt
      md5: 3a906fc26f2ff4b8abad07c45d2c7e1e
      size: 7419271
    - path: data/interim/train/ja/tfidf_idf.txt
      md5: a4646bec27fc3d4053bc40b7851688e0
      size: 18970
    - path: data/interim/train/ja/tfidf_vocab.txt
      md5: cb7f5ed36c52b9eb9d100a75cb630be7
      size: 10991
    - path: data/interim/train/ja/tfidf_vocab_words.txt
      md5: daffd600a22d7456ffcf67da9e750dd5
      size: 7023
    - path: models//ja/model.txt
      md5: f955fed236ea1536bd075c9b487a433a
      size: 3992869
    - path: models//ja/pca.pkl
      md5: 191e60dbb55e5dc26d5f9accd00b0290
      size: 2786052
    - path: reports//ja/best_params.yaml
      md5: 6497ad4612aba1647acfbbaba651b23d
      size: 247
    - path: reports//ja/confusion.csv
      md5: bedeff5d8812a3c102282307c53e1737
      size: 117249
    - path: reports//ja/metrics.json
      md5: 5faf267e0fb2e1ba2a41a022d1aa90e9
      size: 2982
    - path: reports//ja/train_progress.csv
      md5: 9fe21671a685d6c06fb85c42be171f91
      size: 5611
