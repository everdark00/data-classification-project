schema: '2.0'
stages:
  tika_de:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=de
    deps:
    - path: data_test/raw//de
      md5: ed415476b6bb791945121541cd03e0b3.dir
      size: 94126353
      nfiles: 205
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//de
      md5: 27e99dad9f66e0e681e3fdb5780151e1.dir
      size: 6489907
      nfiles: 205
  tokenizer_de:
    cmd: export PYTHONPATH=$PWD && python -m spacy download de_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=de
    deps:
    - path: data_test/interim/tika/de
      md5: 27e99dad9f66e0e681e3fdb5780151e1.dir
      size: 6489907
      nfiles: 205
    - path: src/tokenizer.py
      md5: ed59716e9e5f090388f101912c19f224
      size: 3963
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/de
      md5: b7e24a5bcf503d8035c725854f7ea588.dir
      size: 3094747
      nfiles: 9
  train_de:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=de
    deps:
    - path: data_test/interim/tokenizer/de
      md5: b7e24a5bcf503d8035c725854f7ea588.dir
      size: 3094747
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/de/pca.txt
      md5: 0dd602860653cb43ae772e335fcf0148
      size: 817352
    - path: data_test/interim/train/de/tfidf_idf.txt
      md5: 682849fc592391e7f87073304c3a4d67
      size: 18732
    - path: data_test/interim/train/de/tfidf_vocab.txt
      md5: d882560625e8755a0f1ff3ee2890fadc
      size: 10988
    - path: data_test/interim/train/de/tfidf_vocab_words.txt
      md5: 42ae5eb18d4c10d5a3596a1ab0992c2f
      size: 8022
    - path: models//de/model.txt
      md5: 0fcca7af97829658e0f2ac493eed2f77
      size: 6105
    - path: models//de/pca.pkl
      md5: 6c559e71971249a1b3f35a995eb6a6ac
      size: 304813
    - path: reports//de/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//de/confusion.csv
      md5: 85af2e2614e533ddf36406ff31aac1d1
      size: 93
    - path: reports//de/metrics.json
      md5: e7df42991760968b5827539705562e1d
      size: 77
    - path: reports//de/train_progress.csv
      md5: 2d9b9fa21b1a0703b1300184d2c65a60
      size: 5436
  make_small_dataset:
    cmd: export PYTHONPATH=$PWD && python src/make_test_dataset.py --config=params.yaml
      --test_dir=data_test
    deps:
    - path: src/make_test_dataset.py
      md5: 369f9c4f31aa5e866b26ac0bd2784a77
      size: 1566
    outs:
    - path: data_test/raw/de
      md5: ed415476b6bb791945121541cd03e0b3.dir
      size: 94126353
      nfiles: 205
    - path: data_test/raw/es
      md5: 2d32648e66465168018d6468213188a4.dir
      size: 65410390
      nfiles: 229
    - path: data_test/raw/fr
      md5: f3c0a7447a4386da507e1dd0c6c15cef.dir
      size: 67877226
      nfiles: 218
    - path: data_test/raw/it
      md5: f85370ff9b8819c5c89f06b516ae76b6.dir
      size: 44140397
      nfiles: 196
    - path: data_test/raw/ja
      md5: fc6304eea4403edd31a64ef0814f3858.dir
      size: 91818770
      nfiles: 352
  tika_fr:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=fr
    deps:
    - path: data_test/raw//fr
      md5: f3c0a7447a4386da507e1dd0c6c15cef.dir
      size: 67877226
      nfiles: 218
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//fr
      md5: 1596f77e633d59695901f1405faaf840.dir
      size: 5235713
      nfiles: 218
  tokenizer_fr:
    cmd: export PYTHONPATH=$PWD && python -m spacy download fr_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=fr
    deps:
    - path: data_test/interim/tika/fr
      md5: 1596f77e633d59695901f1405faaf840.dir
      size: 5235713
      nfiles: 218
    - path: src/tokenizer.py
      md5: ed59716e9e5f090388f101912c19f224
      size: 3963
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/fr
      md5: 95b7306631be7256163029232ce75554.dir
      size: 2233065
      nfiles: 9
  train_fr:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=fr
    deps:
    - path: data_test/interim/tokenizer/fr
      md5: 95b7306631be7256163029232ce75554.dir
      size: 2233065
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/fr/pca.txt
      md5: 549cae9cfca334d1a2212f587e31b79b
      size: 795007
    - path: data_test/interim/train/fr/tfidf_idf.txt
      md5: 5ea7862f520fb3b9326f81bffa4a17d9
      size: 18847
    - path: data_test/interim/train/fr/tfidf_vocab.txt
      md5: 3fd5f0ca73b6b41e0f628a6382954984
      size: 11000
    - path: data_test/interim/train/fr/tfidf_vocab_words.txt
      md5: b2123cee4c49cd5be23969b23d0be226
      size: 7846
    - path: models//fr/model.txt
      md5: d2bcbf2ff0b7b9f299a56e2571f80be0
      size: 6051
    - path: models//fr/pca.pkl
      md5: e48da4d40d196a35fa74fc7220beedb0
      size: 296597
    - path: reports//fr/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//fr/confusion.csv
      md5: f821f48c114ede43be25248b46d9f54d
      size: 89
    - path: reports//fr/metrics.json
      md5: f09aa3963806e5f7e484c63925f7e78d
      size: 75
    - path: reports//fr/train_progress.csv
      md5: 06ac7523fc8652f326b1b9b92ff69e26
      size: 5436
  tika_es:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=es
    deps:
    - path: data_test/raw//es
      md5: 2d32648e66465168018d6468213188a4.dir
      size: 65410390
      nfiles: 229
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//es
      md5: 9b89973c3f7a4fd6037e54fe4b7c91dc.dir
      size: 11037938
      nfiles: 229
  tokenizer_es:
    cmd: export PYTHONPATH=$PWD && python -m spacy download es_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=es
    deps:
    - path: data_test/interim/tika/es
      md5: 9b89973c3f7a4fd6037e54fe4b7c91dc.dir
      size: 11037938
      nfiles: 229
    - path: src/tokenizer.py
      md5: ed59716e9e5f090388f101912c19f224
      size: 3963
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/es
      md5: 253896415e3fc9375495af1b0fe939b1.dir
      size: 2276548
      nfiles: 9
  train_es:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=es
    deps:
    - path: data_test/interim/tokenizer/es
      md5: 253896415e3fc9375495af1b0fe939b1.dir
      size: 2276548
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/es/pca.txt
      md5: 622feabfc30048909dd705ccb28ca2f8
      size: 859969
    - path: data_test/interim/train/es/tfidf_idf.txt
      md5: a5d4627aa6c7e6022e0a43c563c7702c
      size: 18754
    - path: data_test/interim/train/es/tfidf_vocab.txt
      md5: ceeb7b803502e3d9ec5954ceff089695
      size: 11000
    - path: data_test/interim/train/es/tfidf_vocab_words.txt
      md5: 517536e29887e9e53b5009aef2b5eca0
      size: 7982
    - path: models//es/model.txt
      md5: 154ddf195198c2ae09827acd6adb722e
      size: 6215
    - path: models//es/pca.pkl
      md5: 2a64b59dd8366de020f748379f264c06
      size: 321245
    - path: reports//es/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//es/confusion.csv
      md5: f0a7ed933f67429146e022bb7b77ed8f
      size: 93
    - path: reports//es/metrics.json
      md5: e78d20d403b3275339e8966e36fa6b07
      size: 77
    - path: reports//es/train_progress.csv
      md5: 8bf7e0f4851105a92ad737481b2efce4
      size: 5436
  tika_it:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=it
    deps:
    - path: data_test/raw//it
      md5: f85370ff9b8819c5c89f06b516ae76b6.dir
      size: 44140397
      nfiles: 196
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//it
      md5: edcb00070414c3801a5ef0ffccd7d804.dir
      size: 4857340
      nfiles: 196
  tokenizer_it:
    cmd: export PYTHONPATH=$PWD && python -m spacy download it_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=it
    deps:
    - path: data_test/interim/tika/it
      md5: edcb00070414c3801a5ef0ffccd7d804.dir
      size: 4857340
      nfiles: 196
    - path: src/tokenizer.py
      md5: ed59716e9e5f090388f101912c19f224
      size: 3963
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/it
      md5: 1e17d91f2447c1500c01df093f001a8d.dir
      size: 1956100
      nfiles: 9
  train_it:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=it
    deps:
    - path: data_test/interim/tokenizer/it
      md5: 1e17d91f2447c1500c01df093f001a8d.dir
      size: 1956100
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/it/pca.txt
      md5: 8c030047303335d3d649825817d4cfbc
      size: 769996
    - path: data_test/interim/train/it/tfidf_idf.txt
      md5: 1ac98d116d86e62d1a4c66bd183745f8
      size: 18854
    - path: data_test/interim/train/it/tfidf_vocab.txt
      md5: d3ebae0b548959115f30f8e162351348
      size: 11018
    - path: data_test/interim/train/it/tfidf_vocab_words.txt
      md5: e9096a1c67fb2cedd47c790b7a4ea5fa
      size: 7711
    - path: models//it/model.txt
      md5: 16d711c874a1a6c556d61b0d111102c7
      size: 4944
    - path: models//it/pca.pkl
      md5: 40ac1e4b7055fbd5fd76c4e5b2c8e547
      size: 288381
    - path: reports//it/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//it/confusion.csv
      md5: abc9f4f4c082c6a0a6f53486f0e757cf
      size: 89
    - path: reports//it/metrics.json
      md5: dccbc9fcfab19d26a2ca0bfcb973f8dd
      size: 76
    - path: reports//it/train_progress.csv
      md5: f24ed07fa14a73cdf00a2068ccdf9060
      size: 5196
  tika_ja:
    cmd: export PYTHONPATH=$PWD && python src/tika_parser.py --config=params.yaml
      --locale=ja
    deps:
    - path: data_test/raw//ja
      md5: fc6304eea4403edd31a64ef0814f3858.dir
      size: 91818770
      nfiles: 352
    - path: src/tika_parser.py
      md5: 1de949225b2f26c35330fb0962d52592
      size: 2183
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tika:
          input_path: raw/
          output_path: interim/tika/
    outs:
    - path: data_test/interim/tika//ja
      md5: 5590a4c3f3b44885573a76e858d6dd0b.dir
      size: 5499183
      nfiles: 352
  tokenizer_ja:
    cmd: export PYTHONPATH=$PWD && python -m spacy download ja_core_news_sm && python
      src/tokenizer.py --config=params.yaml --locale=ja
    deps:
    - path: data_test/interim/tika/ja
      md5: 5590a4c3f3b44885573a76e858d6dd0b.dir
      size: 5499183
      nfiles: 352
    - path: src/tokenizer.py
      md5: ed59716e9e5f090388f101912c19f224
      size: 3963
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer:
          min_tokens: 500
          max_symbols: 250000
          input_path: interim/tika
          output_path: interim/tokenizer
          industries:
          - finance_banking
          - it_research_development
          - manufacturing
          - medical_medicine_paramedical
          - sales_marketing_pr
          - businises_corporate
          - hr
          - legal
          - others
    outs:
    - path: data_test/interim/tokenizer/ja
      md5: efd37cf2c0c23878f30f8231d1bee61f.dir
      size: 3475930
      nfiles: 9
  train_ja:
    cmd: export PYTHONPATH=$PWD && python src/train_model.py --config=params.yaml
      --locale=ja
    deps:
    - path: data_test/interim/tokenizer/ja
      md5: efd37cf2c0c23878f30f8231d1bee61f.dir
      size: 3475930
      nfiles: 9
    - path: src/train_model.py
      md5: 0e8318348837b5bc77b9cf625f98fdd1
      size: 11332
    params:
      params.yaml:
        base:
          log_level: DEBUG
          random_seed: 42
          log_path: logs
          crawlers:
          - colly
          - google
          - common
          data_dir: data_test
        tokenizer.industries:
        - finance_banking
        - it_research_development
        - manufacturing
        - medical_medicine_paramedical
        - sales_marketing_pr
        - businises_corporate
        - hr
        - legal
        - others
        train:
          input_path: interim/tokenizer
          interim_path: interim/train
          test_size: 0.25
          validate_size: 0.2
          max_features: 1024
          reports_path: reports/
          models_path: models/
          pca_explained_variance_threshold: 0.9
          lightgbm_parameters:
            learning_rate:
            - 0.15
            boosting:
            - gbdt
            max_depth:
            - 2
            - 4
            num_leaves:
            - 20
            - 31
            - 40
            objective:
            - multiclass
            num_iterations:
            - 240
            subsample:
            - 0.5
            subsample_freq:
            - 1
            is_unbalance:
            - true
            reg_lambda:
            - 0.01
            early_stopping_round:
            - 3
            metric:
            - multi_logloss
            verbosity:
            - -1
    outs:
    - path: data_test/interim/train/ja/pca.txt
      md5: ef26f6d31bbdaf0af28f1a159cf1db6f
      size: 835030
    - path: data_test/interim/train/ja/tfidf_idf.txt
      md5: 2ad01b1d88df952383c491366bb38858
      size: 18768
    - path: data_test/interim/train/ja/tfidf_vocab.txt
      md5: 2c47ef2b4fc45fdc2a250245a2c5f0e4
      size: 11002
    - path: data_test/interim/train/ja/tfidf_vocab_words.txt
      md5: e19b82f8852f19a72586cd6442cb9e73
      size: 6931
    - path: models//ja/model.txt
      md5: 7b9179cbc3df935f641ffe57db238ef4
      size: 6161
    - path: models//ja/pca.pkl
      md5: f37dcd12049c891d6281bbfe1adda3b2
      size: 313029
    - path: reports//ja/best_params.yaml
      md5: f1512bf03a0e6acff071682123898ffd
      size: 247
    - path: reports//ja/confusion.csv
      md5: ee282aad2b5f4205c6da6849db7c945c
      size: 93
    - path: reports//ja/metrics.json
      md5: c9629003095b5d4d4a43f2662e0ff193
      size: 77
    - path: reports//ja/train_progress.csv
      md5: 1d267d31d9ed06f062193ddcc507cca8
      size: 5436
